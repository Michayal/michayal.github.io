<html>
    <head>
        <! Run local server with python -m SimpleHTTPServer>
        <meta charset="utf-8">
        <title>WebFEA</title>
        <meta name="description" content="Truss-viz">
        <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-controller-cursor-component@0.2.2/dist/aframe-controller-cursor-component.min.js"></script>
        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.0.1/dist/aframe-extras.min.js"></script>
        <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
        <script src="https://unpkg.com/aframe-teleport-controls/dist/aframe-teleport-controls.min.js"></script>
        <script src="https://unpkg.com/aframe-input-mapping-component/dist/aframe-input-mapping-component.min.js"></script>
        <!script src="https://cdn.rawgit.com/zcanter/aframe-gradient-sky/master/dist/gradientsky.min.js"><!/script>
        <script src="https://unpkg.com/@tlaukkan/aframe-three-color-gradient-shader@0.0.1/index.js"></script>
        <script src="components/intersection-spawn.js"></script>
        <script src="components/random-color.js"></script>
        <script src="components/snap.js"></script>
        <script src="data.js"></script>
        <script src = "https://unpkg.com/mathjs@6.2.1"></script>
        <script src = "super-hands.js"></script>
        <script src ="mappings.js"></script>
        <script src ="input-listen.js"></script>
        <script src="https://rawgit.com/google-ar/three.ar.js/f9603ee/dist/three.ar.js"></script>
        <!-- Last, include aframe-ar. -->
        <script src="https://rawgit.com/chenzlabs/aframe-ar/master/dist/aframe-ar.min.js"></script>

    </head>

    <body>
        <a-scene avatar-recorder touch-to-click-converter physics="gravity:-9.8" ar>
            <a-assets>

                <a-mixin id="node" geometry="primitive: sphere; radius: 0.1"
                         material="shader: standard; color: #ffffff"
                         hoverable
                         grabbable="startButtons: triggerdown, mousedown; endButtons: triggerdown, mouseup"
                         draggable
                         droppable
                         shadow
                         event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
                         event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
                         event-set__dragdrop="">
                </a-mixin>

                <a-mixin id="pointer" raycaster="showLine: true; objects: .node, a-link"
                         super-hands="colliderEvent: raycaster-intersection;
                                      colliderEventProperty: els;
                                      colliderEndEvent:raycaster-intersection-cleared;
                                      colliderEndEventProperty: clearedEls;">
                </a-mixin>

                <a-mixin id="teleport"
                         teleport-controls="type: parabolic; cameraRig: #cameraRig;">
                </a-mixin>

                <a-mixin id="controller-right" mixin="teleport"
                         vive-controls="hand: right" oculus-touch-controls="hand: right"
                         windows-motion-controls="hand: right"
                         gearvr-controls daydream-controls oculus-go-controls
                         super-hands
                         static-body="shape: sphere; sphereRadius: 0.02;"
                         sphere-collider="objects: #node;">
                </a-mixin>

                <a-mixin id="controller-left" mixin="teleport"
                         vive-controls="hand: left" oculus-touch-controls="hand: left"
                         windows-motion-controls="hand: left"
                         super-hands
                         raycaster="objects: .node; far:50;" laser-controls="hand: left">
                </a-mixin>

                <!img id="groundTexture" src="https://cdn.aframe.io/a-painter/images/floor.jpg">
                <!img id="skyTexture" src="https://cdn.aframe.io/a-painter/images/sky.jpg">
                <img id="texture1" src=texture1.png>
                <img id="texture2" src=texture2.png>
                <img id="texture3" src=texture3.png>
                <img id="texture4" src=texture4.png>
                <img id="texture5" src=texture5.png>
                <img id="texture6" src=texture6.png>
            </a-assets>
            <!--
<a-entity progressive-controls="objects: .node">
<a-entity id="lhand" class="left-controller"></a-entity>
<a-entity id="rhand" class="right-controller"></a-entity>
</a-entity>
-->
            <a-entity id ="cameraRig" position = "4 0 5">
                <a-entity wasd-controls look-controls>
                    <a-entity camera id="camera" position = "0 1.6 0"
                              capture-mouse
                              raycaster="objects: .node" cursor="rayOrigin:mouse"
                              static-body="shape: sphere; sphereRadius: 0.001"
                              super-hands="colliderEvent: raycaster-intersection;
                                           colliderEventProperty: els;
                                           colliderEndEvent:raycaster-intersection-cleared;
                                           colliderEndEventProperty: clearedEls;">
                    </a-entity>
                </a-entity>
                <a-entity id="rhand" mixin="controller-right" input-listen></a-entity>
                <a-entity id="lhand" mixin="controller-left" input-listen></a-entity>
            </a-entity>


            <a-text id="detailText" value="Node value:" look-at="#camera" align="center" color="#FFF" visible="false" position="2 3 5" rotation = "0 0 0"></a-text>

            <!a-sky id="bg" radius="30" src="#skyTexture" theta-length="90"><!/a-sky>

            <!a-cylinder id="ground" src="#groundTexture" radius="32" height="0.1"><!/a-cylinder>

            <!-- Hands.
<a-entity id="teleHand"
hand-controls="left"
teleport-controls="type: parabolic; collisionEntities: [mixin='voxel'], #ground"
></a-entity>

<a-entity id="blockHand"
hand-controls="right"
controller-cursor
!intersection-spawn="event: click; mixin: voxel"
></a-entity>-->

            <!-- Camera. -->
            <!--
<a-camera id="camera" position = "4 1.5 5">
<a-entity cursor="downEvents: triggerdown; upEvents: triggerUp"
geometry="primitive: ring; radiusInner: 0.03; radiusOuter: 0.05"
material="color: blue; shader: flat"
position="0 0 -1">
</a-entity>
</a-camera>


<a-entity wasd-controls look-controls position = "4 0 5">
<a-entity camera id="camera" position = "0 1.6 0"
capture-mouse
raycaster="objects: .node" cursor="rayOrigin:mouse"
static-body="shape: sphere; sphereRadius: 0.001"
super-hands="colliderEvent: raycaster-intersection;
colliderEventProperty: els;
colliderEndEvent:raycaster-intersection-cleared;
colliderEndEventProperty: clearedEls;">
</a-entity>
</a-entity>

-->
        </a-scene>
    </body>
</html>
